import{ref as f,watch as m,onMounted as c,onUnmounted as l,h as y,defineComponent as p}from"@histoire/vendors/vue";import{components as v}from"@histoire/controls";import*as t from"virtual:$histoire-setup";import*as o from"virtual:$histoire-generated-global-setup";import d from"./MountStory.svelte.js";import S from"./MountVariant.svelte.js";import w from"./Stub.svelte.js";const O=p({name:"MountStory",props:{story:{type:Object,required:!0}},setup(e){const s=f();let i,n;async function u(){n=document.createElement("div"),s.value.appendChild(n),i=new e.story.file.component({target:n,props:{Hst:{Story:d,Variant:S,...h()}},context:new Map(Object.entries({__hstStory:e.story}))});const r={app:i,story:e.story,variant:null};typeof(o==null?void 0:o.setupSvelte3)=="function"&&await o.setupSvelte3(r),typeof(t==null?void 0:t.setupSvelte3)=="function"&&await t.setupSvelte3(r),typeof(o==null?void 0:o.setupSvelte4)=="function"&&await o.setupSvelte3(r),typeof(t==null?void 0:t.setupSvelte4)=="function"&&await t.setupSvelte3(r)}function a(){var r;i==null||i.$destroy(),n&&((r=n.parentNode)==null||r.removeChild(n),n=null)}return m(()=>e.story.id,async()=>{a(),await u()}),c(async()=>{await u()}),l(()=>{a()}),{el:s}},render(){return y("div",{ref:"el"})}});function h(){const e={};for(const s in v)e[s.substring(3)]=w;return e}export{O as default};
